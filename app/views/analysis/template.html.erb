<div class="row">
  <div class="col-md-1"></div>
    <div class="col-md-10">
        <div class="panel panel-default">
          <div class="panel-heading text-center">
            <h3 class="panel-title">Template: <%= @template.name %></h3>
          </div>
          <div class="panel-body">
            <div id="scale-1-10-charts"></div>
            <div id="boolean-charts"></div>
          </div>
        </div>
        <!-- <div id="chart-template-scale"></div> -->
        
    </div>  
  <div class="col-md-1"></div>
</div>

<script type="text/javascript">
  $(function () {
      <% @all_template_scale_1_to_10s.each_with_index do |chart, index| %>
      $("#scale-1-10-charts").append("<div id='chart-<%= index %>'></div>");
      $('#chart-<%= index %>').highcharts({
          chart: {
              type: 'spline'
          },
          title: {
              text: "Question: <%= chart.first[:question_text] %>"
          },
          xAxis: {
              type: 'datetime',
              dateTimeLabelFormats: { // don't display the dummy year
                  second: '%H:%M:%S',
                  minute: '%H:%M',
                  hour: '%H:%M',
                  day: '%B, %e',
                  week: '%B, %e',
                  month: '%B \'%Y',
                  year: '%Y'
              },
          },
          yAxis: {
              min: 0,     
              max: 10,
              title: {
                  text: 'Scale of 1 to 10'
              }
          },
          tooltip: {
              headerFormat: '<strong>Name: </strong>{series.name}<br>',
              pointFormat: '<strong>Date: </strong>{point.x:%B, %e %Y}<br><strong>Score: </strong>{point.y:.1f}/10<br>(Click Point for Detail)'
          },

          plotOptions: {
              spline: {
                  marker: {
                      enabled: true
                  }
              }
          },
          series: [
            <% chart.map do |results_per_question| %> {
                name: '<%= results_per_question[:name] %>',
                URLs: <%= raw results_per_question[:URLs].map{|url| "analysis/instructor_only/#{url}"} %>,
                data: <%= results_per_question[:data] %>,
                point: {
                  events: {
                    click: function() {
                      x = this;
                      var someURL = this.series.userOptions.URLs[this.series.data.indexOf(this)];
                      window.open('<%= ENV['DOMAIN'] %>'+someURL);
                    }
                  }
                },
                lineWidth: 5,
                question_text: '<%= results_per_question[:question_text] %>'
              }<%= "," unless results_per_question == chart.last %>
            <% end %>
          ]


      });
      <% end %>

      <% @all_template_booleans.each_with_index do |chart, index| %>
      $("#boolean-charts").append("<div id='chart-boolean-<%= index %>'></div>");
      $('#chart-boolean-<%= index %>').highcharts({
          chart: {
              type: 'spline'
          },
          title: {
              text: "Question: <%= chart.first[:question_text] %>"
          },
          xAxis: {
              type: 'datetime',
              dateTimeLabelFormats: { // don't display the dummy year
                  second: '%H:%M:%S',
                  minute: '%H:%M',
                  hour: '%H:%M',
                  day: '%B, %e',
                  week: '%B, %e',
                  month: '%B \'%Y',
                  year: '%Y'
              },
          },
          yAxis: {
            min: 0,     
            max: 1,
            title: {
                text: "Percent Positive"
            },
            labels: {
                formatter:function() {
                    return (this.value * 100) + '%';
                }
            }
          },
          tooltip: {
              headerFormat: '<strong>Name: </strong>{series.name}<br>',
              pointFormat: '<strong>Date: </strong>{point.x:%B, %e %Y}<br><strong>Score: </strong>{point.y:.1f}/10<br>(Click Point for Detail)'
          },

          plotOptions: {
              spline: {
                  marker: {
                      enabled: true
                  }
              }
          },

          series: [
            <% chart.map do |results_per_question| %> {
                name: '<%= results_per_question[:name] %>',
                URLs: <%= raw results_per_question[:URLs].map{|url| "analysis/instructor_only/#{url}"} %>,
                data: <%= results_per_question[:data] %>,
                point: {
                  events: {
                    click: function() {
                      x = this;
                      var someURL = this.series.userOptions.URLs[this.series.data.indexOf(this)];
                      window.open('<%= ENV['DOMAIN'] %>'+someURL);
                    }
                  }
                },
                lineWidth: 5,
                question_text: '<%= results_per_question[:question_text] %>'
              }<%= "," unless results_per_question == chart.last %>
            <% end %>
          ]
      });
      <% end %>
  });
</script>